#! /bin/bash

if [[ $# == 0 ]]
then
    OF=output.h
else
    OF=$1
fi

TMP="_tmp.b2c"
DATE=`date`
echo "/* Autogenerated by bin2c with esseci script on $DATE */"  > $OF
echo "" >> $OF

#write header file head..
UCASE=`echo ${OF%.h} | tr "[:lower:]" "[:upper:]"`
MACRO="__${UCASE}_H__"
echo "#ifndef $MACRO" >> $OF
echo "#define $MACRO" >> $OF

echo "" >> $OF

for IF in eq*.png
do
    echo -n "Processing $IF..."
    bin2c -c $IF $TMP
    cat $TMP >> $OF
    echo " " >> $OF
    VARNAME=${IF%.png}_png
    echo "done."
done

echo "" >> $OF
echo "#endif // $MACRO" >> $OF

rm -f $TMP

cp $OF ../../src

exit 0
